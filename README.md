# ESP32 usb over ip

![license](https://img.shields.io/badge/许可证-Apache%202.0-blue.svg)
![device](https://img.shields.io/badge/设备-ESP32S3-orange.svg)

**一个基于开源项目 [usbipdcpp_esp32](https://github.com/yunsmall/usbipdcpp_esp32) 的增强版本，专注于优化和稳定 USB/IP 协议在 ESP32S3 上的数据传输。**

原项目实现了基础框架。本项目**着重解决了在实际应用中遇到的数据传输稳定性、兼容性和性能瓶颈问题**，旨在提供一个可用于更稳定场景的生产力工具或开发基础。

## 📑 目录
- [✨ 主要特性与增强](#-主要特性与增强)
- [🚀 快速开始](#-快速开始)
- [📊 更新日志](#-更新日志)
- [📝 许可证与致谢](#-许可证与致谢)
- [💡 开发透明度声明](#-开发透明度声明)

---

## ✨ 主要特性


*   **🚀 传输**：16kb/s的传输速度（打开一个210kb的图片要十几秒）。
*   **🔧 设备兼容性**：目前关注于u盘的共享，其他的usb设备没有测试。
*   **⚡ 连接稳定性**：客户端attach后需要160秒才可以看到u盘的文件目录。
*   **📄 总结**：目前属于原理。

---

## 🚀 快速开始

1.  **硬件准备**：esp32s3的IO18、IO19用于usb信号线，（IO2连接WS2812B灯带的DI引脚*可选*）。
2.  **环境准备**：确保已安装 ESP-IDF 开发环境（使用 V5.5.1 版本），esp32s3的IO18、IO19用于usb信号线。
3.  **获取代码**：`git clone https://github.com/psdscsv/esp32_usb_over_ip.git`
4.  **配置项目**：进入目录，运行 `idf.py set-target esp32s3`选择开发板。
5.  **编译与烧录**：`idf.py build flash monitor`
6.  **客户端连接**：在 windows的usbip_win2 客户端连接 ESP32-S3 的 IP 地址。

---

## 📊 更新日志

### [v0.1.1] - 2026-1-31
#### 交互增强
- **增加了灯光指示，增加了WiFi连接界面**
- led-红色：尝试连接wifi；黄色：启动热点，用户可以连接“登录-192.168.4.1”，并打开浏览器输入*192.168.4.1*进入配网界面，输入wifi名和密码；蓝色：开始共享设备（另外配网模式会等待30秒，之后无论有没有连接都会开始共享）
- esp32连接u盘，服务端从开始连接到显示u盘文件目录，需要160秒
- u盘中的文件表现为只读，修改等操作会卡死
- 增大了数据传输量，可以达到15kb/s

### [v0.1.0] - 2026-1-28
#### 首次发布
- **从原项目 `usbipdcpp_esp32` 分叉并进行增强**
- 修复了因数据传输包大于设备缓冲区导致的卡死

*[查看完整更新历史](changelog.md)*
---

## 📝 许可证与致谢

### 许可证
*   本项目基于 **Apache License Version 2.0** 开源。

### 致谢
*   衷心感谢原项目作者 [yunsmall](https://github.com/yunsmall) 及的工作。
*   感谢 USB/IP 协议的开源社区及 Espressif 提供的 ESP-IDF 框架。

---

## 💡 开发透明度声明

本项目在开发过程中，使用了 AI 编程助手进行部分代码的构思、重构和文档撰写，以提高开发效率。**项目的核心逻辑、关键优化及最终实现均由开发者验证、测试并负责。**
*这段话也是AI生成的*